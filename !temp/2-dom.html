<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DOM API</title>
    <style>
      /* CSS */
      .foo {
        background-color: blue;
      }
    </style>
  </head>
  <body>
    <div class="foo">Hello</div>

    <div class="user" id="foo-123" my-attr="abc" data-foo="Q1" data-bar="Q2">
      foo-123
    </div>
    <div class="user bar-456">bar-456</div>

    <div id="has-data" data-foo="Q1" data-bar="Q2">foo-123</div>

    <div id="list"></div>

    <!-- ============================ -->
    <div class="elem-a">
      <div class="elem-a1">
        <p>hello</p>
      </div>
      <div class="elem-a2">
        <div class="elem-a2-c1">
          <p>hello</p>
        </div>
        <div class="elem-a2-c2">
          <p>hello</p>
        </div>
      </div>
      <div class="elem-a3">
        <p>hello</p>
      </div>
    </div>
    <!-- ============================ -->

    <script>
      let pTag = document.createElement("p");
      pTag.innerText = "paragraph!";

      let div1 = document.createElement("div");
      div1.style.backgroundColor = "red";
      div1.style.width = "100px";
      div1.style.height = "100px";
      div1.innerHTML = "<p>Hello</p>"; // text and html
      //   div1.innerText = "dude"; // only visible text
      //   div1.textContent = "wow"; // only visible/invisible text

      div1.setAttribute("id", "123");
      div1.setAttribute("id-2", "456");

      div1.getAttribute("id"); // "123"
      div1.removeAttribute("id-2");

      div1.classList.add("class-2", "class-3", "class-replaceable");
      div1.classList.remove("class-3");
      div1.classList.toggle("class-4"); // toggles presence of the class
      div1.classList.replace("class-replaceable", "class-replaceable-2");
      div1.classList.contains("aaa");

      document.body.appendChild(div1); // only handles single node
      //   document.body.append("some text", div1); // handles text and multiple nodes - more flexible
      document.body.append("some-text-appended");

      //   div1.remove(); // removes node

      div1.appendChild(pTag);
      //   div1.removeChild(pTag);

      //
      // Events
      //

      let callback = (event) => {
        event.stopPropagation(); // Prevents bubbling
        event.preventDefault(); // Prevents default behavior (if applicable)
        alert("click-1");
      };

      //   div1.onclick = callback;
      div1.addEventListener("click", callback);
      //   div1.removeEventListener("click", callback);
      //   div1.dispatchEvent(new Event("click")); // manually dispatch event

      /* ======== Event list

        - click
        - dblclick

        - mousedown
        - mouseup
        - mousemove
        - mouseenter
        - mouseleave
        - mouseover
        - mouseout

        - keydown
        - keyup

        === forms event

        - submit
        - reset
        - input
        - change
        - focus
        - blur

        === clipboard events

        - copy
        - paste
        - cut

        === window events

        - load
        - unload
        - scroll
        - resize
        - hashchange

        === MISC events

        - wheel
        - ...

       */

      let a2 = document.querySelector(".elem-a2");
      let parentEl = a2.parentElement; // .parentNode (any type: text, comment, element, document, documentFragment)
      let childrenEls = a2.children;
      let prevEl = a2.previousElementSibling;
      let nextEl = a2.nextElementSibling;

      console.log(parentEl); // elem-a
      console.log(prevEl); // elem-a1
      console.log(a2); // elem-a2
      console.log(nextEl); // elem-a3
      console.log(childrenEls); // elem-a3

      //
      // Event bubling: when you click a deeply nested element, the ancestors receive the click also
      //

      let foo123 = document.getElementById("foo-123");
      let bar456 = document.getElementsByClassName("bar-456"); // elements
      let myAttr_abc = document.querySelector("[my-attr='abc']");
      let users = document.querySelectorAll(".user");

      console.log(foo123, bar456, myAttr_abc, users);

      //
      // dataset
      //

      let hasData = document.querySelector("#has-data");
      hasData.dataset.bar = "Q2000";

      let foo = hasData.dataset.foo;
      let bar = hasData.dataset.bar;

      console.log(foo, bar); // Q1 Q2000

      //
      //
      //

      // Replace the old child with the new child
      // parent.replaceChild(newChild, oldChild); // new first

      //
      //
      //

      let div10 = document.createElement("div");
      let div20 = document.createElement("div");
      let div30 = document.createElement("div");
      div10.innerHTML = "<p>AAA</p>";
      div20.innerHTML = "<p>BBB</p>";
      div30.innerHTML = "<p>CCC</p>";

      document.body.appendChild(div20);
      div20.before(div10);
      div20.after(div30);

      // works also:
      // document.body.appendChild(div20);
      // document.body.insertBefore(div10, div20);
      // document.body.insertBefore(div30, div20.nextElementSibling);
    </script>
  </body>
</html>
